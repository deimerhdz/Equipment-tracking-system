import{a as C}from"./chunk-BJJWRXLE.js";import{a as L,b as f,c as O,d as G,e as Y,f as $,g as z,h as H,l as J,m as K}from"./chunk-JBJS33BQ.js";import{a as Z}from"./chunk-JWLIMLOG.js";import{$ as S,D as s,H as p,J as M,K as i,L as t,M as c,N as V,P as h,Q as w,R as n,S as d,U as x,V as D,Z as R,e as X,ga as P,ia as y,ja as T,k as B,ka as j,ma as q,o as E,pa as U,q as l,r as b,s as g,v as _,w as F,z as I}from"./chunk-LDKAS3T6.js";var N=X(Z());function ee(o,e){if(o&1){let u=V();i(0,"tr")(1,"td"),n(2),t(),i(3,"td"),c(4,"img",5),t(),i(5,"td"),n(6),t(),i(7,"td"),n(8),t(),i(9,"td"),n(10),t(),i(11,"td"),n(12),t(),i(13,"td")(14,"button",6),h("click",function(){let a=_(u).$implicit,v=w();return F(v.editEquipment(a._id))}),n(15,"Editar"),t(),n(16,"\xA0 "),i(17,"button",7),h("click",function(){let a=_(u).$implicit,v=w();return F(v.deletEequipment(a._id))}),n(18,"Eliminar"),t()()()}if(o&2){let u=e.$implicit;s(2),d(u._id),s(2),p("src",u.photo,I)("alt",u.name),s(2),d(u.name),s(2),d(u.description),s(2),d(u.category),s(2),d(u.stock)}}var te=()=>["/dashboard/equipments/new-equipment"],Q=(()=>{let e=class e{constructor(){this.equipmentService=l(C),this.equipments=[],this.router=l(y)}ngOnInit(){this.listEquipments()}editEquipment(r){this.router.navigateByUrl("/dashboard/equipments/edit-equipment/"+r)}listEquipments(){this.equipmentService.getAllEquipments().subscribe(r=>{this.equipments=r.equipments})}deletEequipment(r){N.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(m=>{m.isConfirmed&&this.equipmentService.deleteEquipmentById(r).subscribe(a=>{console.log(a),N.default.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),this.listEquipments()})})}};e.\u0275fac=function(m){return new(m||e)},e.\u0275cmp=b({type:e,selectors:[["app-equipment-page"]],standalone:!0,features:[x],decls:24,vars:3,consts:[[1,"col-md-12"],["routerLinkActive","active",1,"btn","btn-primary",3,"routerLink"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"card-img",3,"src","alt"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(m,a){m&1&&(i(0,"div",0)(1,"h3"),n(2," Equipment list "),t(),i(3,"a",1),n(4,"Agregar equipment"),t(),i(5,"table",2)(6,"thead")(7,"tr")(8,"th",3),n(9,"#id"),t(),i(10,"th",3),n(11,"Photo"),t(),i(12,"th",3),n(13,"name"),t(),i(14,"th",3),n(15,"Description"),t(),i(16,"th",3),n(17,"category"),t(),i(18,"th",3),n(19,"Stock"),t(),i(20,"th",3),n(21,"Acciones"),t()()(),i(22,"tbody"),M(23,ee,19,7,"tr",4),t()()()),m&2&&(s(3),p("routerLink",D(2,te)),s(20),p("ngForOf",a.equipments))},dependencies:[q,T,j,S,R]});let o=e;return o})();var A=(()=>{let e=class e{constructor(){this.fb=l(J),this.equipmentService=l(C),this.authService=l(U),this.router=l(y),this.equipmentForm=this.fb.group({name:["",f.required],description:["",f.required],stock:["",f.required],category:["",f.required],user:["",f.required],_id:[""]}),this.activateRoute=l(P)}ngOnInit(){this.equipmentForm.controls.user.setValue(this.authService.currentUser().uid),this.router.url.includes("edit-equipment")&&this.activateRoute.params.pipe(B(({id:r})=>this.equipmentService.getEquipmentById(r))).subscribe(r=>{if(!r)return this.router.navigateByUrl("/dashboard/equipments");this.equipmentForm.reset(r)})}get currentEquipment(){return this.equipmentForm.value}save(){if(this.currentEquipment._id){this.equipmentService.updateEquipment(this.currentEquipment).subscribe(r=>{this.router.navigateByUrl("/dashboard/equipments")});return}this.equipmentService.saveEquipment(this.currentEquipment).subscribe(r=>{this.router.navigateByUrl("/dashboard/equipments")})}};e.\u0275fac=function(m){return new(m||e)},e.\u0275cmp=b({type:e,selectors:[["app-add-equipment-page"]],standalone:!0,features:[x],decls:22,vars:2,consts:[[1,"col-md-6",3,"formGroup","submit"],[1,"mb-3"],["for",""],["formControlName","name","type","text",1,"form-control"],["formControlName","description","type","text",1,"form-control"],["formControlName","category","type","text",1,"form-control"],["formControlName","stock","type","number",1,"form-control"],[1,"btn","btn-success",3,"disabled"]],template:function(m,a){m&1&&(i(0,"form",0),h("submit",function(){return a.save()}),i(1,"h3"),n(2,"New Equipment"),t(),i(3,"div",1)(4,"label",2),n(5,"Name"),t(),c(6,"input",3),t(),i(7,"div",1)(8,"label",2),n(9,"Description"),t(),c(10,"input",4),t(),i(11,"div",1)(12,"label",2),n(13,"category"),t(),c(14,"input",5),t(),i(15,"div",1)(16,"label",2),n(17,"stock"),t(),c(18,"input",6),t(),i(19,"div",1)(20,"button",7),n(21,"Agregar"),t()()()),m&2&&(p("formGroup",a.equipmentForm),s(20),p("disabled",a.equipmentForm.invalid))},dependencies:[K,Y,L,$,O,G,z,H]});let o=e;return o})();var ie=[{path:"",component:Q},{path:"new-equipment",component:A},{path:"edit-equipment/:id",component:A}],W=(()=>{let e=class e{};e.\u0275fac=function(m){return new(m||e)},e.\u0275mod=g({type:e}),e.\u0275inj=E({imports:[q.forChild(ie),q]});let o=e;return o})();var Fe=(()=>{let e=class e{};e.\u0275fac=function(m){return new(m||e)},e.\u0275mod=g({type:e}),e.\u0275inj=E({imports:[S,W]});let o=e;return o})();export{Fe as EquipmentModule};
